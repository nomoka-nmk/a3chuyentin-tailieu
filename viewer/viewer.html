<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A3 Chuyên Tin - Tài Liệu</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 m-0 p-0 min-h-screen">
    <div id="iframeContainer" class="w-full h-screen">
        <iframe id="viewerIframe" class="w-full h-full border-0" src=""></iframe>
    </div>
    <div id="errorMessage" class="hidden flex items-center justify-center h-screen bg-red-50">
        <div class="text-center text-black text-xl font-semibold p-6 rounded-lg shadow-md bg-white">
            Lỗi 404: URL được yêu cầu không thể truy cập hoặc không tồn tại.
        </div>
    </div>

    <script>
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            const regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            const results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }

        window.onload = function() {
            const url = getUrlParameter('url');
            const iframe = document.getElementById('viewerIframe');
            const errorMessage = document.getElementById('errorMessage');
            const iframeContainer = document.getElementById('iframeContainer');

            if (url) {
                iframe.src = url;

                fetch(url, { method: 'HEAD' })
                    .then(response => {
                        if (!response.ok) {
                            iframeContainer.classList.add('hidden');
                            errorMessage.classList.remove('hidden');
                        }
                    })
                    .catch(() => {
                        iframeContainer.classList.add('hidden');
                        errorMessage.classList.remove('hidden');
                    });
            } else {
                iframeContainer.classList.add('hidden');
                errorMessage.classList.remove('hidden');
                errorMessage.querySelector('div').textContent = 'Không có URL được cung cấp trong chuỗi truy vấn.';
            }
        };
    </script>
</body>
</html>